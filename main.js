(()=>{"use strict";const e=class{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputErrorSelector=e.inputErrorSelector,this._form=t}_hiddenError(e){this._errorElement=e.nextElementSibling,this._errorElement.innerText="",e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass)}_showError(e){this._errorElement=e.nextElementSibling,this._errorElement.innerText=e.validationMessage,e.classList.add(this._inputErrorClass),this._errorElement.classList.add(this._errorClass)}_enableButton=()=>{this._buttonSubmitElement=this._form.querySelector(this._submitButtonSelector),this._buttonSubmitElement.removeAttribute("disabled"),this._buttonSubmitElement.classList.remove(this._inactiveButtonClass)};_disableButton=()=>{this._buttonSubmitElement=this._form.querySelector(this._submitButtonSelector),this._buttonSubmitElement.setAttribute("disabled","true"),this._buttonSubmitElement.classList.add(this._inactiveButtonClass)};_toggleInputState(e){this._isValid=e.validity.valid,this._errorElement=this._form.querySelector(`#${e.id}-error`),this._isValid?this._hiddenError(e):this._showError(e)}_toggleButtonState(){this._formIsValid=this._inputList.every((e=>e.validity.valid)),this._formIsValid?this._enableButton():this._disableButton()}_setEventListener(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputState(e),this._toggleButtonState()})),this._toggleButtonState()}))}enableValidation=()=>{this._setEventListener()};resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hiddenError(e)}))}},t=class{constructor(e){this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.code&&this.close()}setEventListeners(){this._popupSelector.querySelector(".popup__close").addEventListener("click",(()=>this.close())),this._popupSelector.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()}))}},s=class extends t{constructor(e){super(e),this._link=this._popupSelector.querySelector(".popup__item"),this._name=this._popupSelector.querySelector(".popup__title")}open(e,t){this._link.src=t,this._name.textContent=e,this._link.alt=e,super.open()}},r=class extends t{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popupSelector.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}},n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",inputSectionsSelector:".popup__section",inputErrorSelector:".popup__error"},i=document.querySelector(".elements"),o=document.querySelector("#edit"),l=document.querySelector("#add"),a=document.querySelector("#photo"),c=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),u=document.querySelector("#edit-info"),d=u.querySelector("#name"),h=u.querySelector("#about"),p=document.querySelector("#add-place"),m=new e(n,u);m.enableValidation();const S=new e(n,p);S.enableValidation();const E=new class{constructor({name:e,about:t}){this._name=document.querySelector(e),this._about=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo({name:e,about:t}){this._name.textContent=e,this._about.textContent=t}}({name:".profile__name",about:".profile__about   "}),b=new r(o,((e,t)=>{E.setUserInfo(e,t),b.close()}));b.setEventListeners();const v=new r(l,(e=>{C.addItem(y(e))}));function y(e){return new class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._container=t,this._handleCardClick=s}_getTemplate(){return this._templateSelector=document.querySelector("#element").content,this._templateSelector.querySelector(".elements__element").cloneNode(!0)}generateCard(){return this._card=this._getTemplate(),this._card.querySelector(".elements__title").textContent=this._name,this._card.querySelector(".elements__item").alt=this._name,this._card.querySelector(".elements__item").src=this._link,this._cardImage=this._card.querySelector(".elements__item"),this._setEventListeners(),this._card}_handleRemoveCard=()=>{this._card.remove()};_handleLikeCard=()=>{this._buttonHeart.classList.toggle("elements__heart_active")};_setEventListeners=()=>{this._buttonDeleteCard=this._card.querySelector(".elements__delete"),this._buttonHeart=this._card.querySelector(".elements__heart"),this._buttonDeleteCard.addEventListener("click",this._handleRemoveCard),this._buttonHeart.addEventListener("click",this._handleLikeCard),this._cardImage.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}(e,i,f).generateCard()}function f(e,t){const r=new s(a);r.setEventListeners(),r.open(e,t)}v.setEventListeners();const C=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._containerSelector=s}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerSelector.prepend(e)}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{i.prepend(y(e))}},i);C.renderItems(),c.addEventListener("click",(function(){const e=E.getUserInfo();d.value=e.name,h.value=e.about,m.resetValidation(),b.open()})),_.addEventListener("click",(function(){p.reset(),S.resetValidation(),v.open()}))})();